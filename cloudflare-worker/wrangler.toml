name = "birthday-email-scheduler"
main = "src/index.js"
compatibility_date = "2023-10-30"
account_id = "${CF_ACCOUNT_ID}" # 从环境变量获取Cloudflare账号ID

kv_namespaces = [
  { binding = "SCHEDULED_EMAILS_KV", id = "${KV_NAMESPACE_ID}" } # 从环境变量获取KV命名空间ID
]

[vars]
# Email configuration
SENDER_EMAIL = "${SENDER_EMAIL}" # 发送邮件的邮箱地址
SENDER_EMAIL_REQUIRED = true
VERIFICATION_EMAIL = "${VERIFICATION_EMAIL}" # 发送验证码的邮箱地址
VERIFICATION_EMAIL_REQUIRED = true

# You can define environment variables here if needed, but secrets are better for sensitive data
ENCRYPTION_SECRET = "${ENCRYPTION_SECRET}" # 数据加密密钥(32位以上随机字符串)
ENCRYPTION_SECRET_REQUIRED = true
RESEND_API_KEY = "${RESEND_API_KEY}" # Resend邮件服务API密钥
RESEND_API_KEY_REQUIRED = true

# Cron Triggers configuration
# This example runs the cron job every hour. Adjust as needed.
# See https://developers.cloudflare.com/workers/platform/cron-triggers/
[triggers]
crons = ["0 * * * *"] # Runs at the start of every hour