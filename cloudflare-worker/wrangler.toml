name = "birthday-email-scheduler1"
main = "src/index.js"
compatibility_date = "2023-10-30"

kv_namespaces = [
  { binding = "SCHEDULED_EMAILS_KV", id = "${KV_NAMESPACE_ID}" } # 从环境变量获取KV命名空间ID
]

[vars]
# Email configuration
SENDER_EMAIL = "${SENDER_EMAIL}" # 发送邮件的邮箱地址
VERIFICATION_EMAIL = "${VERIFICATION_EMAIL}" # 发送验证码的邮箱地址
ENCRYPTION_SECRET = "${ENCRYPTION_SECRET}" # 数据加密密钥(32位以上随机字符串)
RESEND_API_KEY = "${RESEND_API_KEY}" # Resend邮件服务API密钥

# You can define environment variables here if needed, but secrets are better for sensitive data

# Birthday wishes and email templates
BIRTHDAY_WISHES = """[
123584
]"""

VERIFICATION_EMAIL_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>验证邮件</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 600px; margin: 0 auto; }
        .code { font-size: 24px; font-weight: bold; color: #2563eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>您的验证码</h1>
        <p>请使用以下验证码完成验证：</p>
        <p class="code">${randomWishAsCode}</p>
        <p>此验证码将在10分钟后失效。</p>
    </div>
</body>
</html>
"""

SCHEDULED_EMAIL_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>生日快乐！</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f8fafc; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; background: white; border-radius: 8px; }
        .message { font-size: 18px; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎉 生日快乐！</h1>
        <div class="message">
            ${message}
        </div>
        <p>祝您度过美好的一天！</p>
    </div>
</body>
</html>
"""

# Cron Triggers configuration
# This example runs the cron job every hour. Adjust as needed.
# See https://developers.cloudflare.com/workers/platform/cron-triggers/
[triggers]
crons = ["0 * * * *"] # Runs at the start of every hour
